ARG RUNNER=node
ARG VERSION=9
ARG FLAVOUR=stretch
ARG TAG=${VERSION}-${FLAVOUR}

FROM ${RUNNER}:${TAG}

ENV STAGE 'development'

ENV APP_DIR   '/opt/app'
ENV CRON_SPEC '* * * * *'
ENV CRON_EXEC ''
ENV EXEC_OPTS ''
ENV LOGS_PATH "${APP_DIR}/run.log"

WORKDIR /opt/scripts

ADD scripts .
RUN chmod +x *
RUN ./cron-installer.sh

CMD [ "/opt/scripts/runner-cmd.sh" ]
